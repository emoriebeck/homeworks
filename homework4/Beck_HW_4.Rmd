---
title: "Homework 4"
author: "Emorie Beck"
date: \today
output: 
  pdf_document:
    toc: yes
    includes:
            in_header:
                header.tex
    keep_tex: yes
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, warning = F, message = F)
```

# Workspace

## Packages
```{r packages, results='hide'}
library(psych)
library(lme4)
library(knitr)
library(kableExtra)
library(plyr)
library(tidyverse)
```

For this assignment, you will use the High School and Beyond data (HSB.csv) that were used for Homework 1.  

## Data
```{r data}
data_url <- "https://raw.githubusercontent.com/emoriebeck/homeworks/master/homework4/HSB(18).csv"
dat      <- read.csv(url(data_url)) %>% tbl_df
```


# Question 1
Create four dummy codes to represent the four possible combinations of the variables, minority and female: 

\begin{itemize}
\item minority girls (MG): minority = 1, female = 1  
\item minority boys (MB) minority = 1 and female = 0 
\item nonminority girls (NMG): minority = 0 and female = 1 
\item nonminority boys (NMB): minority = 0 and female = 0  
\end{itemize}


# Question 2
Fit the following no-intercept model:   

## Part A
mathach ~-1 + MG + MB + NMG + NMB + (-1 + MG + MB + NMG + NMB|School). 

## Part B 
Construct weights for combining the fixed effect parameters from (a) that will test the main effect of Student Sex. 

## Part C 
Construct weights for combining the fixed effect parameters from (a) that will test the main effect of Minority Status. 

## Part D 
Construct weights for combining the fixed effect parameters from (a) that will test the Student Sex x Minority Status interaction. 

## Part E
Construct weights for combining the fixed effect parameters from (a) that will test the Minority Status effect, but just for males. 

## Part F
Construct weights for combining the fixed effect parameters from (a) that will test the Student Sex effect, but just for minority students. 

## Part G
Use the resulting weight matrix in `glht()` to obtain the significance tests. Which effects are significant? 

# Question 3
Now fit this model:  

## Part A
mathach ~ 1 + minority + female + minority:female + (1 + minority + female + minority:female|School) 

## Part B
Do the main effects and interaction tests resemble the results from the previous analysis?  

## Part C
Construct weights for combining the fixed effect parameters from (a) that will reproduce the means for the four groups (MB, MG, NMB, and NMG). 

## Part D
Use the weight matrix with `glht()`. How close are the means to those that were present in the fixed effect parameters for the model in Question 2? 

# Question 4
Fit the following model:   

## Part A
mathach ~ 1 + MB + NMG + NMB + (1 + MB + NMG + NMB|School). 

## Part B
What do the fixed effect parameters mean in this analysis? 

## Part C 
Construct the weight matrix that will reproduce the means for the four groups (MB, MG, NMB, and NMG). 

## Part D
Construct the weight matrix necessary to reproduce the tests of the two main effects and the interaction. 

##Part E 
Use the matrix in glht( ) and compare the results to those obtained in Question 2.  

# Question 5 
Compare the fit for the three models using the `anova( )` function. If you named the fit objects: Fit\_1, Fit\_2, and Fit\_3, then use `anova(Fit_1, Fit_2, Fit_3)`. The result should not surprise you; why not?  
